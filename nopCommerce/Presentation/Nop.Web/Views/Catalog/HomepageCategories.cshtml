@model IList<CategoryModel>

@using Nop.Web.Models.Catalog;
@if (Model.Count > 0)
{
    <div class="home-page-category-grid">
        @foreach (var item in Model)
        {
            <div class="item-box">
                <div class="category-item">
                    <h2 class="title">
                        <a href="@Url.RouteUrl("Category", new { SeName = item.SeName })" title="@item.PictureModel.Title">
                            @item.Name</a>
                    </h2>
                    <div class="picture">
                        <a href="@Url.RouteUrl("Category", new { SeName = item.SeName })" title="@item.PictureModel.Title">
                            <img alt="@item.PictureModel.AlternateText" src="@item.PictureModel.ImageUrl"
                                 title="@item.PictureModel.Title" /></a>
                    </div>
                    
                    <div class="sub-categories">
                        @{ int counter = 0;}
                        @foreach (var subCategory in item.SubCategories)
                        {
                            counter++;

                            if (counter <= 3)
                            {
                                <h3 class="sub-category-title">
                                    <a href="@Url.RouteUrl("Category", new { SeName = subCategory.SeName })" title="@subCategory.PictureModel.Title">
                                        @subCategory.Name
                                    </a>
                                </h3>
                            }
                            else
                            {
                                <h3 class="sub-category-title">
                                    <a href="@Url.RouteUrl("Category", new { SeName = item.SeName })" title="Еще...">
                                        Еще...
                                    </a>
                                </h3>

                                break;
                            }

                        }
                    </div>
                </div>
            </div>
        }
    </div>
}