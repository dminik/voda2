@model IList<CategoryModel>

@{
     var i = 1;
}
@using Nop.Web.Models.Catalog;
@if (Model.Count > 0)
{
    <table class="home-page-category-grid">
       
        @foreach (var item in Model)
        {
            if(i == 1)
            {
                @:<tr>
            }  
               
            <td>
                 <div class="item-box">
                
                

                        <table class="category-item">
                    
                            <tr class="top-category-item">
                                <td>
                                    <h2 class="title">
                                        <a href="@Url.RouteUrl("Category", new { SeName = item.SeName })" title="@item.PictureModel.Title">
                                            @item.Name
                                        </a>
                                    </h2>
                                </td>
                            </tr>
                                        
                            <tr class="mid-category-item">                        
                                <td>
                                    <div class="picture">
                                        <a href="@Url.RouteUrl("Category", new { SeName = item.SeName })" title="@item.PictureModel.Title">
                                            <img alt="@item.PictureModel.AlternateText" src="@item.PictureModel.ImageUrl"
                                                 title="@item.PictureModel.Title" /></a>
                                    </div>
                                </td>                    
                            </tr>
                    
                    
                            <tr class="bottom-category-item">
                                <td>
                                    <div class="sub-categories">
                                        @{ int counter = 0; }
                                        @foreach (var subCategory in item.SubCategories)
                                        {
                                            counter++;

                                            if (counter <= 10)
                                            {
                                                <h3 class="sub-category-title">
                                                    <a href="@Url.RouteUrl("Category", new { SeName = subCategory.SeName })" title="@subCategory.PictureModel.Title">
                                                        @subCategory.Name
                                                    </a>
                                                </h3>
                                            }
                                            else
                                            {
                                                <h3 class="sub-category-title">
                                                    <a href="@Url.RouteUrl("Category", new { SeName = item.SeName })" title="Еще...">
                                                        Еще...
                                                    </a>
                                                </h3>

                                                break;
                                            }

                                        }
                                    </div>
                                </td>
                            </tr>

                        </table>
                    </div>
                    
            </td>
                

            if(i == 3)
            { 
                @:</tr>
                i = 0;
            } 
            
            i++;
       }
    </table>
}